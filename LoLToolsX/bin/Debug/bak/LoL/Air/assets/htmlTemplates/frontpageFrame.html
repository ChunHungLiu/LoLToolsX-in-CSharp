<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
<head>
    <title></title>
    <style>
        body {
            background-color: #000;
            padding: 0;
            margin: 0;
            overflow: hidden;
        }

        iframe {
            border: none;
            display: none;
        }
    </style>
    <!--http://help.adobe.com/en_US/AIR/1.5/devappshtml/WS5b3ccc516d4fbf351e63e3d118666ade46-7f11.html-->
    <script type="text/javascript" src="app:/assets/htmlTemplates/AIRAliases.js"></script>
    <script>
        var sandbox;
        var iframeLocation;
        var iframeOrigin;
        var isLoaded = false;
        var timeout = 5000;
        var parentInterface = {
            reload: function() {
                hideIframe();
                sandbox.setAttribute("src", iframeLocation);
            },
            loaded: function() {
                showIframe();
            }
        };

        function handleDomInit() {
            // No need to do anything if content is already loaded.
            if (isLoaded) {
                return;
            }
            // Setup sandbox bridge
            sandbox = document.getElementById("sandbox");
            sandbox.contentWindow.parentSandboxBridge = parentInterface;
            setContentTimeout();
        }

        function handleError() {
        }

        function checkContent() {
            if (!isLoaded) {
                showFallback();
            }
        }

        function hideIframe() {
            isLoaded = false;
            sandbox.style.display = "none";
            hideFrontpage();
        }

        function showIframe() {
            isLoaded = true;
            sandbox.style.display = "block";
            showFrontpage();
        }

        function showFallback() {
            sandbox.setAttribute("src", "app:/assets/htmlTemplates/frontpageFallbackFrame.html");
        }

        function setContentTimeout() {
            if (isLoaded) {
                return;
            }

            setTimeout(function() {
                checkContent();
            }, timeout);
        }

        function navigate(origin, location) {
            var sandbox = document.getElementById("sandbox");
            var sandboxRoot = origin + "/client-assets";

            iframeOrigin = origin;
            iframeLocation = location;

            parentInterface.clientAssetPath = sandboxRoot;
            sandbox.setAttribute("sandboxRoot", sandboxRoot);
            sandbox.setAttribute("src", location);
        }
    </script>
</head>
<body>
<iframe id="sandbox" documentRoot="app:/assets/" ondominitialize="handleDomInit()"
        allowCrossDomainXHR="allowCrossDomainXHR" onerror="handleError()" width="100%" height="100%"></iframe>
</body>
</html>